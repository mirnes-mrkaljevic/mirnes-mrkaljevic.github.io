<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
        Keep Your Database In Sync With Application: Fluent Migrator | Optimal Coder
      
  </title><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Keep Your Database In Sync With Application: Fluent Migrator | Optimal Coder</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Keep Your Database In Sync With Application: Fluent Migrator" />
<meta name="author" content="Mirnes Mrkaljevic" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this post, we continue to explore ways to free your application from being tightly bound to the Entity Framework environment. The primary goal is to offer an alternative solution that is not only more flexible and robust but also gives you, as a developer, greater control over database manipulation with less abstraction and complexity. Here, we introduce a library for database migrations, which serves as a natural extension to tools like Dapper and SqlKata." />
<meta property="og:description" content="In this post, we continue to explore ways to free your application from being tightly bound to the Entity Framework environment. The primary goal is to offer an alternative solution that is not only more flexible and robust but also gives you, as a developer, greater control over database manipulation with less abstraction and complexity. Here, we introduce a library for database migrations, which serves as a natural extension to tools like Dapper and SqlKata." />
<link rel="canonical" href="https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator" />
<meta property="og:url" content="https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator" />
<meta property="og:site_name" content="Optimal Coder" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Keep Your Database In Sync With Application: Fluent Migrator" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Mirnes Mrkaljevic"},"dateModified":"2025-01-26T00:00:00+00:00","datePublished":"2025-01-26T00:00:00+00:00","description":"In this post, we continue to explore ways to free your application from being tightly bound to the Entity Framework environment. The primary goal is to offer an alternative solution that is not only more flexible and robust but also gives you, as a developer, greater control over database manipulation with less abstraction and complexity. Here, we introduce a library for database migrations, which serves as a natural extension to tools like Dapper and SqlKata.","headline":"Keep Your Database In Sync With Application: Fluent Migrator","mainEntityOfPage":{"@type":"WebPage","@id":"https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator"},"url":"https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://optimalcoder.net/feed.xml" title="Optimal Coder" /><link rel="icon" href="/assets/images/favicon.png" type="image/png">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Keep Your Database In Sync With Application: Fluent Migrator | Optimal Coder</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Keep Your Database In Sync With Application: Fluent Migrator" />
<meta name="author" content="Mirnes Mrkaljevic" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this post, we continue to explore ways to free your application from being tightly bound to the Entity Framework environment. The primary goal is to offer an alternative solution that is not only more flexible and robust but also gives you, as a developer, greater control over database manipulation with less abstraction and complexity. Here, we introduce a library for database migrations, which serves as a natural extension to tools like Dapper and SqlKata." />
<meta property="og:description" content="In this post, we continue to explore ways to free your application from being tightly bound to the Entity Framework environment. The primary goal is to offer an alternative solution that is not only more flexible and robust but also gives you, as a developer, greater control over database manipulation with less abstraction and complexity. Here, we introduce a library for database migrations, which serves as a natural extension to tools like Dapper and SqlKata." />
<link rel="canonical" href="https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator" />
<meta property="og:url" content="https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator" />
<meta property="og:site_name" content="Optimal Coder" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-01-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Keep Your Database In Sync With Application: Fluent Migrator" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Mirnes Mrkaljevic"},"dateModified":"2025-01-26T00:00:00+00:00","datePublished":"2025-01-26T00:00:00+00:00","description":"In this post, we continue to explore ways to free your application from being tightly bound to the Entity Framework environment. The primary goal is to offer an alternative solution that is not only more flexible and robust but also gives you, as a developer, greater control over database manipulation with less abstraction and complexity. Here, we introduce a library for database migrations, which serves as a natural extension to tools like Dapper and SqlKata.","headline":"Keep Your Database In Sync With Application: Fluent Migrator","mainEntityOfPage":{"@type":"WebPage","@id":"https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator"},"url":"https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator"}</script>
<!-- End Jekyll SEO tag -->


</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Optimal Coder</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        

        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Keep Your Database In Sync With Application: Fluent Migrator</h1>
    
    <p class="post-meta">
      <time class="dt-published" datetime="2025-01-26T00:00:00+00:00" itemprop="datePublished">Jan 26, 2025
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>In this post, we continue to explore ways to free your application from being tightly bound to the Entity Framework environment. The primary goal is to offer an alternative solution that is not only more flexible and robust but also gives you, as a developer, greater control over database manipulation with less abstraction and complexity. Here, we introduce a library for database migrations, which serves as a natural extension to tools like <a href="https://mirnes-mrkaljevic.github.io/dapper-on-steroids-sqlkata">Dapper and SqlKata</a>.</p>

<h2 id="fluent-migrator">Fluent Migrator</h2>

<p><a href="https://fluentmigrator.github.io/">Fluent Migrator</a> is a library designed for managing database migrations, giving you complete control over the execution and how migrations are written. It offers greater flexibility compared to standard EF migrations, which are closely tied to EF entities and generated automatically, often accompanied by additional overhead, including extra snapshot files.</p>

<p>In the code snippet below, you’ll find a simple migration class. This class includes two methods that override the base <code class="language-plaintext highlighter-rouge">Migration</code> class, allowing you to define your migration. This is all you need to create a migration.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">FluentMigrator</span><span class="p">;</span>

<span class="p">[</span><span class="nf">Migration</span><span class="p">(</span><span class="m">2025011801</span><span class="p">)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Mig2025011801Init</span> <span class="p">:</span> <span class="n">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Create</span><span class="p">.</span><span class="nf">Table</span><span class="p">(</span><span class="s">"Company"</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">WithColumn</span><span class="p">(</span><span class="s">"Id"</span><span class="p">).</span><span class="nf">AsInt32</span><span class="p">().</span><span class="nf">PrimaryKey</span><span class="p">().</span><span class="nf">Identity</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">WithColumn</span><span class="p">(</span><span class="s">"Name"</span><span class="p">).</span><span class="nf">AsString</span><span class="p">(</span><span class="m">255</span><span class="p">).</span><span class="nf">NotNullable</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">Down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Delete</span><span class="p">.</span><span class="nf">Table</span><span class="p">(</span><span class="s">"Company"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

  

</code></pre></div></div>

<p>Additionally, when starting the project, we need to configure FluentMigrator to locate the migration classes and define how they should be executed. This is demonstrated in the code snippet below.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="nn">FluentMigrator.Runner</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Extensions.DependencyInjection</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">serviceProvider</span> <span class="p">=</span> <span class="nf">CreateServices</span><span class="p">();</span>

        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">scope</span> <span class="p">=</span> <span class="n">serviceProvider</span><span class="p">.</span><span class="nf">CreateScope</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="nf">UpdateDatabase</span><span class="p">(</span><span class="n">scope</span><span class="p">.</span><span class="n">ServiceProvider</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="n">IServiceProvider</span> <span class="nf">CreateServices</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ServiceCollection</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">AddFluentMigratorCore</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">ConfigureRunner</span><span class="p">(</span><span class="n">rb</span> <span class="p">=&gt;</span> <span class="n">rb</span>
                <span class="p">.</span><span class="nf">AddSqlServer</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">WithGlobalConnectionString</span><span class="p">(</span><span class="s">"conn string"</span><span class="p">)</span>
                <span class="p">.</span><span class="nf">ScanIn</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">Mig2025011801Init</span><span class="p">).</span><span class="n">Assembly</span><span class="p">).</span><span class="n">For</span><span class="p">.</span><span class="nf">Migrations</span><span class="p">())</span>
            <span class="p">.</span><span class="nf">AddLogging</span><span class="p">(</span><span class="n">lb</span> <span class="p">=&gt;</span> <span class="n">lb</span><span class="p">.</span><span class="nf">AddFluentMigratorConsole</span><span class="p">())</span>
            <span class="p">.</span><span class="nf">BuildServiceProvider</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">UpdateDatabase</span><span class="p">(</span><span class="n">IServiceProvider</span> <span class="n">serviceProvider</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">runner</span> <span class="p">=</span> <span class="n">serviceProvider</span><span class="p">.</span><span class="n">GetRequiredService</span><span class="p">&lt;</span><span class="n">IMigrationRunner</span><span class="p">&gt;();</span>
        <span class="n">runner</span><span class="p">.</span><span class="nf">MigrateUp</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

  

</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>

<p>In conclusion, let us show one table where we see simple comparison between FluentMigrator and EF migrations. This can help you to decide which migration library to use for your next or existing project.</p>

<table>
  <thead>
    <tr>
      <th>Fluent Migrator</th>
      <th>EF Migrations</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Schema migrations for databases with full control over structure</td>
      <td>Built-in to EF for schema migrations tied to EF models</td>
    </tr>
    <tr>
      <td>Independent of ORM (works with raw ADO.NET, Dapper, or others)</td>
      <td>Closely integrated with Entity Framework</td>
    </tr>
    <tr>
      <td>Requires writing migrations manually, which can be verbose but provides full control.</td>
      <td>Migrations are auto-generated and customizable in C#.</td>
    </tr>
    <tr>
      <td>Allows full control, suitable for existing schemas</td>
      <td>Focused on Code First or Model First approaches</td>
    </tr>
    <tr>
      <td>Explicitly define Down() methods for each migration. Provides precise control over rollback logic</td>
      <td>Rollbacks involve reverting migrations using commands like Update-Database -TargetMigration</td>
    </tr>
    <tr>
      <td>Integrates well into CI/CD pipelines as a standalone migration tool. Can be used independently of application deployment</td>
      <td>Integrated into EF workflows, making deployment tied to EF-related commands. Often relies on the application’s context to execute migrations</td>
    </tr>
  </tbody>
</table>

  </div><a class="u-url" href="/keep-your-database-in-sync-with-application-fluent-migrator" hidden></a>

  <p class="post-tags">
    <div class="social-share">
    Share:
    <a class="social-icon" href="https://twitter.com/intent/tweet?text=Keep%20Your%20Database%20In%20Sync%20With%20Application:%20Fluent%20Migrator&url=https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator" target="_blank" aria-label="Share on Twitter">
      


    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="20" height="20" viewBox="0 0 24 24">
      <path d="M22.46 6c-.77.35-1.6.58-2.46.69a4.3 4.3 0 001.88-2.37 8.59 8.59 0 01-2.72 1.04 4.28 4.28 0 00-7.29 3.9A12.14 12.14 0 013 5.15a4.28 4.28 0 001.32 5.71 4.27 4.27 0 01-1.94-.54v.05a4.28 4.28 0 003.43 4.19 4.29 4.29 0 01-1.93.07 4.28 4.28 0 004 2.97A8.6 8.6 0 012 19.54a12.15 12.15 0 006.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-.19 0-.38-.01-.57A8.7 8.7 0 0024 5.52a8.45 8.45 0 01-2.54.7z"/>
    </svg>

  

    </a>
  
    <a class="social-icon" href="https://www.facebook.com/sharer/sharer.php?u=https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator" target="_blank" aria-label="Share on Facebook">
      


    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="20" height="20" viewBox="0 0 24 24">
      <path d="M22 12a10 10 0 10-11.5 9.9v-7H8v-2.9h2.5V9.4c0-2.5 1.5-3.9 3.7-3.9 1.1 0 2.3.2 2.3.2v2.5h-1.3c-1.3 0-1.7.8-1.7 1.6v1.9h3l-.5 2.9h-2.5v7A10 10 0 0022 12z"/>
    </svg>

  

    </a>
  
    <a class="social-icon" href="https://www.linkedin.com/shareArticle?mini=true&url=https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator&title=Keep%20Your%20Database%20In%20Sync%20With%20Application:%20Fluent%20Migrator" target="_blank" aria-label="Share on LinkedIn">
      


    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="20" height="20" viewBox="0 0 24 24">
      <path d="M20.45 20.45h-3.6v-5.4c0-1.3 0-3-1.8-3s-2.1 1.4-2.1 2.9v5.5h-3.6V9h3.5v1.6h.1a3.8 3.8 0 013.4-1.8c3.6 0 4.2 2.4 4.2 5.5v6.1zM5.34 7.43a2.1 2.1 0 112.1-2.1 2.1 2.1 0 01-2.1 2.1zM6.94 20.45H3.74V9h3.2v11.45z"/>
    </svg>

  

    </a>
  
    <a class="social-icon" href="mailto:?subject=Keep%20Your%20Database%20In%20Sync%20With%20Application:%20Fluent%20Migrator&body=https://optimalcoder.net/keep-your-database-in-sync-with-application-fluent-migrator" aria-label="Share via Email">
      


    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="20" height="20" viewBox="0 0 24 24">
      <path d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm0 2v.01L12 13 4 6.01V6h16zM4 18V8l8 5 8-5v10H4z"/>
    </svg>


    </a>
  </div>
  
  </p>
  

  
      <p class="post-tags">
        Tags:
        
          <a href="#" class="search-tag" data-tag="csharp">csharp</a>
        
          <a href="#" class="search-tag" data-tag="database">database</a>
        
          <a href="#" class="search-tag" data-tag="migrations">migrations</a>
        
          <a href="#" class="search-tag" data-tag="entityframework">entityframework</a>
        
      </p>
      <input type="text" id="hidden-search-input"  />
        <ul id="results-container"></ul>
    

    

    

    

</article>

<script src="https://unpkg.com/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>

<script>
  
  var sjs = SimpleJekyllSearch({
    searchInput: document.getElementById('hidden-search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 10,
    fuzzy: false,
  });
  document.querySelectorAll('.search-tag').forEach(tag => {
    tag.addEventListener('click', function(e) {
      e.preventDefault();
      const term = this.dataset.tag;
      document.getElementById('hidden-search-input').value = term;
      // Trigger input event to run search
      document.getElementById('hidden-search-input').dispatchEvent(new Event('input'));
    });
  });
</script>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Optimal Coder</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Mirnes Mrkaljevic</li><li><a class="u-email" href="mailto:mrkaljevicmirnes@gmail.com">mrkaljevicmirnes@gmail.com</a></li></ul><ul class="social-media-list"><li><a href="https://github.com/mirnes-mrkaljevic"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">mirnes-mrkaljevic</span></a></li><li><a href="https://www.linkedin.com/in/mirnes-mrkaljevic"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">mirnes-mrkaljevic</span></a></li></ul>
<p>This is a blog dedicated to software development, offering insights into coding practices, design principles, and industry challenges.</p>
        
      </div>

      <div class="footer-col footer-col-2">
        <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p>

        <div class="subscription-box">
          <h3>Subscribe to Updates</h3>
          <form data-v-f39c1850="" action="https://api.follow.it/subscription-form/NE44NElrTG1CdmovMjF6R3hRc3ZlVVRGbmZPS0lVdHVKVGtnODRMMGtVeGplOCtXcmJzMFR5cmxQR3dNZHduaUxZU3VRTkJDT1pxMElkVElWbWM5ZGFxNUFxVXJLN1FWSFE5aUFFTHIzaE5zY1BrSE9vNklxTVFMQ1JOeEN2Vi98Nm8wU0tXNG9zNmtraDBia0ZReVg1QlhId0MxNE14dFg1YWVQSElDVXVhQT0=/8" method="post">
            <input type="email" name="email" placeholder="Enter your email" required>
            <input type="submit" value="Subscribe">
          </form>
        </div>

        
      </div>

      
    </div>
  </div>

</footer>
</body>

</html>
